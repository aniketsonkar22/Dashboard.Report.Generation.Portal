<div class="report-page-container">
  <h2 class="page-title">Comments</h2>

  <mat-tab-group mat-align-tabs="center" mat-stretch-tabs="true" (selectedTabChange)="onTabChange($event)" [(selectedIndex)]="selectedIndex">
    <mat-tab *ngFor="let item of tabLabels" [label]="item">
      <div class="filters-section">
        <div class="filters-section-left">
        

        <mat-form-field class="example-full-width" appearance="outline">
          <mat-label>KPI</mat-label>
          <mat-select [(value)]="selectedKpiId" (selectionChange)="loadComments()">
            <mat-option *ngFor="let k of kpis" [value]="k.id">{{ k.name }}</mat-option>
          </mat-select>
        </mat-form-field>
        </div>
        <!-- <div class="filters-section-right"> -->
        <!-- <button mat-raised-button class="addBtn" color="primary" (click)="goToReport()">Go To Department</button> -->
        <!-- <button mat-raised-button class="addBtn" color="accent" (click)="testLoadMore()" [disabled]="!hasMore || loadingMore">Test Load More</button> -->
        <!-- </div> -->
      </div>
      <app-comments-group [comments]="visibleComments.length ? visibleComments : comments" [type]="item" (statusChanged)="onStatusChanged()" [status]="status"
        [statuses]="statuses" [commentId]="commentId"></app-comments-group>
      <div style="text-align:center; padding: 12px 0; color: #666;">
        <ng-container *ngIf="loadingMore">Loading more commentsâ€¦</ng-container>
        <ng-container *ngIf="!loadingMore && !hasMore">No more comments.</ng-container>
      </div>
    </mat-tab>
  </mat-tab-group>
  
  <!-- Sentinel element outside tabs for better visibility -->
  <div #sentinel style="height: 20px; background-color: transparent; margin: 20px 0;"></div>

</div>
